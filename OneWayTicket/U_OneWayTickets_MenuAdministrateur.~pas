{ ****************************************************************************
  *** Projet               : OneWayTickets                                 ***
  *** Fenêtre              : Menu administrateur                           *** 
  *** Auteur               : Devaud Alan                                   ***
  *** Description          : Permet la gestion admin et de visionner les   ***
  ***                        statistique de vente                          ***
  *** Version              : 1.0                                           ***
  *** Date de création     : 05.05.2015                                    ***
  **************************************************************************** }
unit U_OneWayTickets_MenuAdministrateur;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
  StdCtrls, Menus;

type
  TFrmMenuAdministrateur = class(TForm)
    GroupBox1: TGroupBox;
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    Label4: TLabel;
    Label5: TLabel;
    lblBilletTotalVendu: TLabel;
    lblBilletVenduMoisCourrant: TLabel;
    lblBilletEnfantsVendu: TLabel;
    lblBilletAdultesVendu: TLabel;
    lblBilletEtudiantsVendu: TLabel;
    GroupBox2: TGroupBox;
    Label6: TLabel;
    lblFilmPlusVu: TLabel;
    BtnDeconnexion: TButton;
    MainMenu1: TMainMenu;
    Fichier1: TMenuItem;
    Gestion1: TMenuItem;
    Dconnexion1: TMenuItem;
    Films1: TMenuItem;
    Salles1: TMenuItem;
    Seance1: TMenuItem;
    procedure Films1Click(Sender: TObject);
    procedure Salles1Click(Sender: TObject);
    procedure Seance1Click(Sender: TObject);
    procedure BtnDeconnexionClick(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
  private
    { Déclarations privées }
  public
    { Déclarations publiques }
  end;

var
  FrmMenuAdministrateur: TFrmMenuAdministrateur;

const
  FRM_MODAL_HEIGHT : integer = 359; // Hauteur d'une fenêtre modal
  FICHIER_FILMS    : String  = './Res/films.csv';

implementation

uses U_OneWayTickets_GestionFilms, U_OneWayTickets_GestionSalles,
  U_OneWayTickets_GestionSeances, U_OneWayTicket;

{$R *.DFM}


{ ****************************************************************************
  *** Affiche la fenêtre de gestion des films                              ***
  **************************************************************************** }
procedure TFrmMenuAdministrateur.Films1Click(Sender: TObject);
begin
  // Initialise la fenêtre
  FrmGestionFilms.Height:= FRM_MODAL_HEIGHT;
  FrmGestionFilms.LbxListeFilms.Clear;
  FrmGestionFilms.chargeListeFilm();
  FrmGestionFilms.LbxListeFilms.ItemIndex:= 0;

  FrmGestionFilms.Visible:= true;
end;

{ ****************************************************************************
  *** Affiche la fenêtre de gestion des salles                             ***
  **************************************************************************** }
procedure TFrmMenuAdministrateur.Salles1Click(Sender: TObject);
begin
  FrmGestionSalles.Height:= FRM_MODAL_HEIGHT; // Initialise la taille de la fenêtre
  FrmGestionSalles.showModal;
end;

{ ****************************************************************************
  *** Affichage de la gestion des séances                                  ***
  **************************************************************************** }
procedure TFrmMenuAdministrateur.Seance1Click(Sender: TObject);
begin
  FrmGestionSeances.Height:= FRM_MODAL_HEIGHT; // Initialise la taille de la fenêtre
  FrmGestionSeances.showModal;
end;


{ ****************************************************************************
  *** Déconnecte l'administrateur pour afficher le menu utilisateur        ***
  **************************************************************************** }
procedure TFrmMenuAdministrateur.BtnDeconnexionClick(Sender: TObject);
begin
  FrmMenuAdministrateur.Visible:= false;
  FrmOneWayTickets.Visible:= true;
end;

{ ****************************************************************************
  *** Affiche le menu utilisateur                                          ***
  **************************************************************************** }
procedure TFrmMenuAdministrateur.FormClose(Sender: TObject;
  var Action: TCloseAction);
begin
  FrmOneWayTickets.Visible:= true;
end;

end.
